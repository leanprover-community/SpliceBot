name: Create single-file PR (workflow_run)

on:
  workflow_run:
    workflows: ["Create single-file PR (Trigger on review comment)"]
    types: [completed]

permissions:
  actions: read
  contents: write
  pull-requests: write

jobs:
  run-reusable:
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    uses: leanprover-community/SpliceBot/.github/workflows/splice_wf_run.yaml@master
    with:
      source_workflow: ${{ github.event.workflow_run.name }}
      # Optional: push PR branches to a dedicated fork.
      push_to_fork: leanprover-community/SpliceBot-testing-fork
      # Installation owner used when minting token from app secrets below.
      token_app_owner: leanprover-community
      # Optional override for a different branch-token installation owner.
      # branch_token_app_owner: leanprover-community
      # Optional fork-mode override; default is "false" when omitted.
      # maintainer_can_modify: "true"
    secrets:
      # Optional static token; if omitted, token_app_* secrets below are used.
      # token: ${{ secrets.SPLICE_BOT_TOKEN }}
      # token_app_id: ${{ secrets.SPLICEBOT_TESTING_APP_ID }}
      # token_app_private_key: ${{ secrets.SPLICEBOT_TESTING_PRIVATE_KEY }}
      # Optional static branch token; if omitted, branch_token_app_* (or token_app_*) is used.
      # branch_token: ${{ secrets.SPLICE_BOT_FORK_TOKEN }}
      branch_token_app_id: ${{ secrets.SPLICEBOT_TESTING_APP_ID }}
      branch_token_app_private_key: ${{ secrets.SPLICEBOT_TESTING_PRIVATE_KEY }}
